<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ad Tycoon – Points Edition</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    @font-face {
      font-family: "3Dumb";
      src: url("3Dumb.ttf") format("truetype");
      font-weight: normal;
      font-style: normal;
    }

    * {
      box-sizing: border-box;
      font-family: "3Dumb", system-ui, -apple-system, BlinkMacSystemFont,
        "Segoe UI", sans-serif;
      color: #000000;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: stretch;
      justify-content: center;
      background: #ffffff;
    }

    .shell {
      width: 100%;
      max-width: 960px;
      padding: 20px;
      display: flex;
      gap: 16px;
    }

    .panel {
      background: #ffffff;
      border-radius: 18px;
      border: 1px solid #e5e7eb;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.06);
      padding: 16px 18px 18px;
    }

    .panel-main {
      flex: 3;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .panel-upgrades {
      flex: 2;
      overflow-y: auto;
      max-height: calc(100vh - 40px);
    }

    .header {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .title {
      margin: 0;
      font-size: 1.4rem;
    }

    .tag {
      font-size: 0.7rem;
      text-transform: uppercase;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid #6ee7b7;
      background: #ecfdf5;
      letter-spacing: 0.09em;
    }

    .stats-row {
      width: 100%;
      display: flex;
      gap: 10px;
      margin-bottom: 12px;
    }

    .stat {
      flex: 1;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      background: #ffffff;
    }

    .stat-label {
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #6b7280;
      margin-bottom: 2px;
    }

    .stat-value {
      font-size: 1.15rem;
      font-weight: 600;
    }

    .ad-area {
      margin-top: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }

    /* Circular watch button */
    #watchButton {
      width: 170px;
      height: 170px;
      border-radius: 50%;
      border: 4px solid #7a0f0f;
      background: radial-gradient(circle at 30% 20%, #ffb3b3, #ff3131, #b81616);
      box-shadow:
        0 12px 0 #5a0b0b,
        0 18px 25px rgba(0, 0, 0, 0.25);
      color: #000000;
      font-size: 26px;
      text-transform: uppercase;
      letter-spacing: 0.07em;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.1s ease;
      padding: 0;
    }

    #watchButton:disabled {
      cursor: default;
      opacity: 0.9;
    }

    /* Pressed/playing state */
    #watchButton.playing {
      transform: translateY(6px);
      box-shadow:
        0 4px 0 #5a0b0b,
        0 10px 18px rgba(0, 0, 0, 0.25);
      background: radial-gradient(circle at 30% 20%, #ff8a8a, #e12727, #8f1010);
    }

    .ad-meta {
      font-size: 0.85rem;
      color: #111827;
      text-align: center;
    }

    #statusText {
      font-size: 0.8rem;
      color: #6b7280;
      margin-top: 2px;
      text-align: center;
    }

    .upgrades-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .upgrades-header h2 {
      margin: 0;
      font-size: 1rem;
    }

    .upgrades-header span {
      font-size: 0.75rem;
      color: #6b7280;
    }

    .upgrade-card {
      border-radius: 12px;
      padding: 10px 10px 9px;
      background: #ffffff;
      border: 1px solid #e5e7eb;
      margin-bottom: 8px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .upgrade-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }

    .upgrade-name {
      font-size: 0.9rem;
      font-weight: 600;
    }

    .upgrade-level {
      font-size: 0.75rem;
      color: #6b7280;
    }

    .upgrade-desc {
      font-size: 0.8rem;
      color: #111827;
    }

    .upgrade-bottom {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 4px;
      gap: 6px;
    }

    .upgrade-cost {
      font-size: 0.8rem;
      color: #111827;
    }

    .upgrade-btn {
      border-radius: 999px;
      border: 1px solid #9ca3af;
      background: #f9fafb;
      color: #111827;
      padding: 4px 10px;
      font-size: 0.78rem;
      cursor: pointer;
      white-space: nowrap;
    }

    .upgrade-btn:disabled {
      opacity: 0.5;
      cursor: default;
    }

    @media (max-width: 800px) {
      .shell {
        flex-direction: column;
      }

      .panel-upgrades {
        max-height: none;
      }
    }
  </style>
</head>
<body>
  <div class="shell">
    <!-- Main panel -->
    <div class="panel panel-main">
      <div class="header">
        <h1 class="title">Ad Tycoon</h1>
        <div class="tag">Points only</div>
      </div>

      <div class="stats-row">
        <div class="stat">
          <div class="stat-label">Points</div>
          <div class="stat-value"><span id="pointsDisplay">0</span></div>
        </div>
        <div class="stat">
          <div class="stat-label">Points / Ad</div>
          <div class="stat-value"><span id="perAdDisplay">5</span></div>
        </div>
        <div class="stat">
          <div class="stat-label">Passive / s</div>
          <div class="stat-value"><span id="passiveDisplay">0</span></div>
        </div>
      </div>

      <div class="ad-area">
        <!-- Circular watch button -->
        <button id="watchButton">Watch Ad</button>

        <div class="ad-meta">
          Reward: <span id="rewardInfo">5 points</span>
        </div>
        <div id="statusText">
          Click the button to start. Wait until the ad finishes to earn points.
        </div>
      </div>
    </div>

    <!-- Upgrades panel -->
    <div class="panel panel-upgrades">
      <div class="upgrades-header">
        <h2>Upgrades</h2>
        <span>Cookie-clicker style modifiers</span>
      </div>

      <!-- Better Ad Deals: flat points per ad -->
      <div class="upgrade-card">
        <div class="upgrade-top">
          <div>
            <div class="upgrade-name">Better Ad Deals</div>
            <div class="upgrade-level">
              Level <span id="betterDealsLevelDisplay">0</span>
            </div>
          </div>
        </div>
        <div class="upgrade-desc">
          Each level adds <strong>+5 base points per ad</strong>.<br />
          Stacks with multipliers and bonuses.
        </div>
        <div class="upgrade-bottom">
          <div class="upgrade-cost">
            Cost: <span id="betterDealsCostDisplay">50</span> pts
          </div>
          <button class="upgrade-btn" id="betterDealsBtn">Buy</button>
        </div>
      </div>

      <!-- Premium Brands: multiplier -->
      <div class="upgrade-card">
        <div class="upgrade-top">
          <div>
            <div class="upgrade-name">Premium Brands</div>
            <div class="upgrade-level">
              Multiplier: <span id="multiplierLevelDisplay">1.0</span>x
            </div>
          </div>
        </div>
        <div class="upgrade-desc">
          Each level adds <strong>+0.25x</strong> to your points-per-ad multiplier.<br />
          e.g. 1.0x → 1.25x → 1.5x → 1.75x...
        </div>
        <div class="upgrade-bottom">
          <div class="upgrade-cost">
            Cost: <span id="multiplierCostDisplay">100</span> pts
          </div>
          <button class="upgrade-btn" id="multiplierBtn">Buy</button>
        </div>
      </div>

      <!-- Viral Moments: chance to double reward -->
      <div class="upgrade-card">
        <div class="upgrade-top">
          <div>
            <div class="upgrade-name">Viral Moments</div>
            <div class="upgrade-level">
              Bonus chance: <span id="bonusChanceDisplay">0</span>%
            </div>
          </div>
        </div>
        <div class="upgrade-desc">
          Each level adds a <strong>+5%</strong> chance that an ad will go viral<br />
          and give <strong>2x points</strong> for that single watch.
        </div>
        <div class="upgrade-bottom">
          <div class="upgrade-cost">
            Cost: <span id="bonusCostDisplay">120</span> pts
          </div>
          <button class="upgrade-btn" id="bonusBtn">Buy</button>
        </div>
      </div>

      <!-- Long-Term Contracts: passive points per second -->
      <div class="upgrade-card">
        <div class="upgrade-top">
          <div>
            <div class="upgrade-name">Long-Term Contracts</div>
            <div class="upgrade-level">
              Level <span id="contractsLevelDisplay">0</span>
            </div>
          </div>
        </div>
        <div class="upgrade-desc">
          Each level adds <strong>+2 passive points per second</strong>.<br />
          Stacks and runs even while ads are playing.
        </div>
        <div class="upgrade-bottom">
          <div class="upgrade-cost">
            Cost: <span id="contractsCostDisplay">80</span> pts
          </div>
          <button class="upgrade-btn" id="contractsBtn">Buy</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // DOM elements
    const pointsDisplay = document.getElementById("pointsDisplay");
    const perAdDisplay = document.getElementById("perAdDisplay");
    const passiveDisplay = document.getElementById("passiveDisplay");
    const watchButton = document.getElementById("watchButton");
    const statusText = document.getElementById("statusText");
    const rewardInfo = document.getElementById("rewardInfo");

    const betterDealsLevelDisplay = document.getElementById(
      "betterDealsLevelDisplay"
    );
    const betterDealsCostDisplay = document.getElementById(
      "betterDealsCostDisplay"
    );
    const betterDealsBtn = document.getElementById("betterDealsBtn");

    const multiplierLevelDisplay = document.getElementById(
      "multiplierLevelDisplay"
    );
    const multiplierCostDisplay = document.getElementById(
      "multiplierCostDisplay"
    );
    const multiplierBtn = document.getElementById("multiplierBtn");

    const bonusChanceDisplay = document.getElementById("bonusChanceDisplay");
    const bonusCostDisplay = document.getElementById("bonusCostDisplay");
    const bonusBtn = document.getElementById("bonusBtn");

    const contractsLevelDisplay = document.getElementById(
      "contractsLevelDisplay"
    );
    const contractsCostDisplay = document.getElementById("contractsCostDisplay");
    const contractsBtn = document.getElementById("contractsBtn");

    // Game state
    let points = 0;

    let betterDealsLevel = 0; // +5 base pts per level
    let multiplierLevel = 0; // +0.25x per level
    let bonusLevel = 0; // +5% bonus chance per level
    let contractsLevel = 0; // +2 passive pts/s per level

    const BASE_POINTS_PER_AD = 5;
    const BASE_AD_MS = 15000; // used by fake timer
    const TICK_MS = 100;

    let watching = false;
    let timer = null;

    // ---- SCALING HELPERS ----
    function getBasePointsPerAd() {
      return BASE_POINTS_PER_AD + betterDealsLevel * 5;
    }

    function getMultiplier() {
      return 1 + multiplierLevel * 0.25;
    }

    function getBonusChance() {
      return Math.min(1, bonusLevel * 0.05);
    }

    function getPassivePerSecond() {
      return contractsLevel * 2;
    }

    function getBetterDealsCost() {
      return Math.round(50 * Math.pow(1.6, betterDealsLevel));
    }

    function getMultiplierCost() {
      return Math.round(100 * Math.pow(1.7, multiplierLevel));
    }

    function getBonusCost() {
      return Math.round(120 * Math.pow(1.8, bonusLevel));
    }

    function getContractsCost() {
      return Math.round(80 * Math.pow(1.75, contractsLevel));
    }

    function getPointsPerAd() {
      return getBasePointsPerAd() * getMultiplier();
    }

    // ---- UI UPDATE ----
    function updateUI() {
      const ptsPerAd = getPointsPerAd();
      const passive = getPassivePerSecond();

      pointsDisplay.textContent = points.toFixed(0);
      perAdDisplay.textContent = ptsPerAd.toFixed(0);
      passiveDisplay.textContent = passive.toFixed(0);
      rewardInfo.textContent = ptsPerAd.toFixed(0) + " points";

      betterDealsLevelDisplay.textContent = betterDealsLevel;
      multiplierLevelDisplay.textContent = getMultiplier().toFixed(2);
      bonusChanceDisplay.textContent = (getBonusChance() * 100).toFixed(0);
      contractsLevelDisplay.textContent = contractsLevel;

      const bdCost = getBetterDealsCost();
      const multCost = getMultiplierCost();
      const bonusCost = getBonusCost();
      const contractsCost = getContractsCost();

      betterDealsCostDisplay.textContent = bdCost;
      multiplierCostDisplay.textContent = multCost;
      bonusCostDisplay.textContent = bonusCost;
      contractsCostDisplay.textContent = contractsCost;

      betterDealsBtn.disabled = watching || points < bdCost;
      multiplierBtn.disabled = watching || points < multCost;
      bonusBtn.disabled = watching || points < bonusCost;
      contractsBtn.disabled = watching || points < contractsCost;
    }

    // ---- AD FLOW ----

    function startAd() {
      if (watching) return;
      watching = true;
      watchButton.disabled = true;
      watchButton.classList.add("playing");
      statusText.textContent =
        "Ad is playing... wait until it finishes to earn points.";

      // >>> plug real rewarded ad here <<<
      // Example:
      // myAdSdk.showRewardedAd({
      //   onComplete: () => onRealAdFinished(true),
      //   onClose: () => onRealAdFinished(false),
      //   onError: () => onRealAdFinished(false),
      // });

      simulateFakeAdTimer(); // keep for now so it works without a real SDK
      updateUI();
    }

    // Fake timer: remove/disable after adding real ads
    function simulateFakeAdTimer() {
      if (timer) clearTimeout(timer);
      timer = setTimeout(() => {
        onRealAdFinished(true);
      }, BASE_AD_MS);
    }

    function onRealAdFinished(watchedFull) {
      if (!watching) return;

      watching = false;
      watchButton.disabled = false;
      watchButton.classList.remove("playing");

      if (!watchedFull) {
        statusText.textContent =
          "Ad closed early. No reward this time. Tap again to try another.";
        updateUI();
        return;
      }

      let reward = getPointsPerAd();
      let message = "";

      const chance = getBonusChance();
      if (chance > 0 && Math.random() < chance) {
        reward *= 2;
        message = " Viral hit! 2x points!";
      }

      points += reward;
      statusText.textContent = `Ad finished! You gained ${reward.toFixed(
        0
      )} points.${message} Tap again to watch another.`;
      updateUI();
    }

    // ---- UPGRADES ----
    function buyBetterDeals() {
      if (watching) return;
      const cost = getBetterDealsCost();
      if (points < cost) {
        statusText.textContent =
          "Not enough points for Better Ad Deals.";
        return;
      }
      points -= cost;
      betterDealsLevel += 1;
      statusText.textContent =
        "Better Ad Deals upgraded. Base points per ad increased.";
      updateUI();
    }

    function buyMultiplier() {
      if (watching) return;
      const cost = getMultiplierCost();
      if (points < cost) {
        statusText.textContent = "Not enough points for Premium Brands.";
        return;
      }
      const before = getMultiplier();
      points -= cost;
      multiplierLevel += 1;
      const after = getMultiplier();
      statusText.textContent = `Premium Brands upgraded. Multiplier went from ${before.toFixed(
        2
      )}x to ${after.toFixed(2)}x.`;
      updateUI();
    }

    function buyBonus() {
      if (watching) return;
      const cost = getBonusCost();
      if (points < cost) {
        statusText.textContent = "Not enough points for Viral Moments.";
        return;
      }
      const before = (getBonusChance() * 100).toFixed(0);
      points -= cost;
      bonusLevel += 1;
      const after = (getBonusChance() * 100).toFixed(0);
      statusText.textContent = `Viral Moments upgraded. Bonus chance went from ${before}% to ${after}%.`;
      updateUI();
    }

    function buyContracts() {
      if (watching) return;
      const cost = getContractsCost();
      if (points < cost) {
        statusText.textContent =
          "Not enough points for Long-Term Contracts.";
        return;
      }
      const before = getPassivePerSecond();
      points -= cost;
      contractsLevel += 1;
      const after = getPassivePerSecond();
      statusText.textContent = `Long-Term Contracts upgraded. Passive points per second went from ${before} to ${after}.`;
      updateUI();
    }

    // Passive income loop
    function passiveTick() {
      const passive = getPassivePerSecond();
      if (passive > 0) {
        points += passive;
        updateUI();
      }
    }

    // Event listeners
    watchButton.addEventListener("click", startAd);
    betterDealsBtn.addEventListener("click", buyBetterDeals);
    multiplierBtn.addEventListener("click", buyMultiplier);
    bonusBtn.addEventListener("click", buyBonus);
    contractsBtn.addEventListener("click", buyContracts);

    setInterval(passiveTick, 1000);
    updateUI();
  </script>
</body>
</html>
